<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Cat Clicker</title>
</head>
<body>
  <div id="display-area-container"></div>
  <h3>Cats List</h3>
  <ul id="cats-list-container"></ul>

  <script>
    var cats = [
      {
        name: 'Blue Eye',
        imageUrl: 'https://lh3.ggpht.com/kixazxoJ2ufl3ACj2I85Xsy-Rfog97BM75ZiLaX02KgeYramAEqlEHqPC3rKqdQj4C1VFnXXryadFs1J9A=s0#w=640&h=496',
      },
      {
        name: 'Kitten',
        imageUrl: 'https://lh3.ggpht.com/nlI91wYNCrjjNy5f-S3CmVehIBM4cprx-JFWOztLk7vFlhYuFR6YnxcT446AvxYg4Ab7M1Fy0twaOCWYcUk=s0#w=640&h=426',
      },
      {
        name: 'Duo Kitten',
        imageUrl: 'https://lh5.ggpht.com/LfjkdmOKkGLvCt-VuRlWGjAjXqTBrPjRsokTNKBtCh8IFPRetGaXIpTQGE2e7ZCUaG2azKNkz38KkbM_emA=s0#w=640&h=454',
      },
    ];
    
    // Create `store` for storing cats click counter
    var catsStore = cats.map((cat) => ({
      name: cat.name,
      imageUrl: cat.imageUrl,
      counter: 0,
    }));

    var selectedCatStoreIndex = catsStore.length ? 0 : -1;

    var displayAreaEl = document.getElementById('display-area-container');
    var listEl = document.getElementById('cats-list-container');

    function generateCounterLabel(counter) {
      var label = counter > 1 ? 'Clicks' : 'Click';
      return label + ': ' + counter;
    }

    function generateID(name, componentName) {
      var id = name.replace(/\s+/,'-');
      return `${id}-${componentName}`; 
    }

    function createCatClickerComponent(cat) {
      var label = generateCounterLabel(cat.counter);
      return `
        <h3>${cat.name}</h3>
        <img
          class="trigger"
          src="${cat.imageUrl}"
          alt="${cat.name}"
          width="320px"
          height="auto"
        >
        <div class="counter">${label}</div>
      `;
    }

    function createCatTagName(cat) {
      return `
        <p>${cat.name}</p>
      `;
    }

    function updateDisplayArea() {
      // Clear all child elements in `displayAreaEl`
      while (displayAreaEl.firstChild) {
        displayAreaEl.removeChild(displayAreaEl.firstChild);
      }

      var cat = catsStore[selectedCatStoreIndex];

      // Create particular `cat-clicker` string
      var componentString = createCatClickerComponent(cat);

      // Create particular `cat-clicker` element
      var id = generateID(cat.name, 'display');
      var componentContainerEl = document.createElement('div');
      componentContainerEl.setAttribute('id', id);
      componentContainerEl.innerHTML = componentString;

      // Add created particular `cat-clicker` to `app-container`
      displayAreaEl.appendChild(componentContainerEl);

      var trigger = componentContainerEl.getElementsByClassName('trigger')[0];
      var counter = componentContainerEl.getElementsByClassName('counter')[0];
      
      // Add event listener for `click`
      trigger.addEventListener('click', () => {
        cat.counter++;
        counter.textContent = generateCounterLabel(cat.counter);
      });
    }

    updateDisplayArea();

    catsStore.forEach(cat => {
      var catTagNameElString = createCatTagName(cat);
      var id = generateID(cat.name, 'item');
      var componentContainerEl = document.createElement('li');
      componentContainerEl.setAttribute('id', id);
      componentContainerEl.innerHTML = catTagNameElString;

      listEl.appendChild(componentContainerEl);
    });

  </script>
</body>
</html>