<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Cat Clicker</title>
</head>
<body>
  <div id="display-area-container"></div>
  <h3>Cats List</h3>
  <ul id="cats-list-container"></ul>

  <script>
  (function() {
    var data = {
      cats: [
        {
          name: 'Blue Eye',
          imageUrl: 'https://lh3.ggpht.com/kixazxoJ2ufl3ACj2I85Xsy-Rfog97BM75ZiLaX02KgeYramAEqlEHqPC3rKqdQj4C1VFnXXryadFs1J9A=s0#w=640&h=496',
          clickCount: 0,
        },
        {
          name: 'Kitten',
          imageUrl: 'https://lh3.ggpht.com/nlI91wYNCrjjNy5f-S3CmVehIBM4cprx-JFWOztLk7vFlhYuFR6YnxcT446AvxYg4Ab7M1Fy0twaOCWYcUk=s0#w=640&h=426',
          clickCount: 0,
        },
        {
          name: 'Duo Kitten',
          imageUrl: 'https://lh5.ggpht.com/LfjkdmOKkGLvCt-VuRlWGjAjXqTBrPjRsokTNKBtCh8IFPRetGaXIpTQGE2e7ZCUaG2azKNkz38KkbM_emA=s0#w=640&h=454',
          clickCount: 0,
        },
      ],
      selectedCatIndex: 0,
    };
    
    var octopus = {
      getAllCats: function() { 
        return data.cats;
      },
      updateSelectedCat: (index) => {
        data.selectedCatIndex = index;
        displayAreaView.render();
      },
      init: function() {
        catsListView.init();
        displayAreaView.init();
      },
      getSelectedCat: function() {
        return data.cats[data.selectedCatIndex];
      },
      increaseClickCountOnSelectedCat: function(increment) {
        var selectedCat = this.getSelectedCat();
        selectedCat.clickCount = selectedCat.clickCount + increment;
        displayAreaView.render();
      }
    };

    var catsListView = {
      render: function() {
        octopus.getAllCats().forEach((cat, index) => {
          // Create `CatTagName` element
          var catTagNameEl = document.createElement('li');
          catTagNameEl.textContent = cat.name;

          // Add element to `list container`
          this.listContainerEl.appendChild(catTagNameEl);

          // Add interaction when cat is clicked, the cat in display will be updated
          // to show the data for selected cat 
          catTagNameEl.addEventListener('click', () => {
            octopus.updateSelectedCat(index)
          });
        });
      },
      init: function() {
        this.listContainerEl = document.getElementById('cats-list-container');
        this.render();
      },
    };

    var displayAreaView = {
      render: function() {
        var selectedCat = octopus.getSelectedCat();

        // Clear all child elements in `displayAreaEl`
        this.displayAreaEl.innerHTML = '';

        // Create particular `cat-clicker` string
        var catClicker = `
          <h3>${selectedCat.name}</h3>
          <img
            class="trigger"
            src="${selectedCat.imageUrl}"
            alt="${selectedCat.name}"
            width="auto"
            height="320px"
          >
          <div class="counter">Clicks: ${selectedCat.clickCount}</div>
        `;

        // Add created particular `cat-clicker` to `app-container`
        this.displayAreaEl.innerHTML = catClicker;

        var trigger = this.displayAreaEl.getElementsByClassName('trigger')[0];
        
        // Add event listener for `click`
        trigger.addEventListener('click', () => {
          octopus.increaseClickCountOnSelectedCat(1);
        });
      },
      init: function() {
        this.displayAreaEl = document.getElementById('display-area-container');
        this.render();
      }
    };

    // Start `cat-clicker-premium`
    octopus.init();

  })();

  </script>
</body>
</html>