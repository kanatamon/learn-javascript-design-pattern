<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Cat Clicker</title>
</head>
<body>
  <div id="display-area-container"></div>
  <h3>Cats List</h3>
  <ul id="cats-list-container"></ul>

  <script>
  (function() {
    var data = {
      cats: [
        {
          name: 'Blue Eye',
          imageUrl: 'https://lh3.ggpht.com/kixazxoJ2ufl3ACj2I85Xsy-Rfog97BM75ZiLaX02KgeYramAEqlEHqPC3rKqdQj4C1VFnXXryadFs1J9A=s0#w=640&h=496',
          clickCount: 0,
        },
        {
          name: 'Kitten',
          imageUrl: 'https://lh3.ggpht.com/nlI91wYNCrjjNy5f-S3CmVehIBM4cprx-JFWOztLk7vFlhYuFR6YnxcT446AvxYg4Ab7M1Fy0twaOCWYcUk=s0#w=640&h=426',
          clickCount: 0,
        },
        {
          name: 'Duo Kitten',
          imageUrl: 'https://lh5.ggpht.com/LfjkdmOKkGLvCt-VuRlWGjAjXqTBrPjRsokTNKBtCh8IFPRetGaXIpTQGE2e7ZCUaG2azKNkz38KkbM_emA=s0#w=640&h=454',
          clickCount: 0,
        },
      ],
      selectedCatIndex: 0,
    };
    
    var octopus = {
      getAllCats: function() { 
        return data.cats;
      },
      updateSelectedCat: (index) => {
        data.selectedCatIndex = index;
        displayAreaView.render();
      },
      init: function() {
        catsListView.init();
      },
    };

    var catsListView = {
      render: function() {
        octopus.getAllCats().forEach((cat, index) => {
          // Create `CatTagName` element
          var catTagNameEl = document.createElement('li');
          catTagNameEl.textContent = cat.name;

          // Add element to `list container`
          this.listContainerEl.appendChild(catTagNameEl);

          // Add interaction when cat is clicked, the cat in display will be updated
          // to show the data for selected cat 
          catTagNameEl.addEventListener('click', () => {
            octopus.updateSelectedCat(index)
          });
        });
      },
      init: function() {
        this.listContainerEl = document.getElementById('cats-list-container');
        this.render();
      },
    };

    octopus.init();

    var displayAreaEl = document.getElementById('display-area-container');

    function generateCounterLabel(counter) {
      var label = counter > 1 ? 'Clicks' : 'Click';
      return label + ': ' + counter;
    }

    function createCatClickerComponent(cat) {
      var label = generateCounterLabel(cat.counter);
      return `
        <h3>${cat.name}</h3>
        <img
          class="trigger"
          src="${cat.imageUrl}"
          alt="${cat.name}"
          width="auto"
          height="320px"
        >
        <div class="counter">${label}</div>
      `;
    }

    function updateDisplayArea() {
      // Clear all child elements in `displayAreaEl`
      while (displayAreaEl.firstChild) {
        displayAreaEl.removeChild(displayAreaEl.firstChild);
      }

      var cat = catsStore[selectedCatStoreIndex];

      // Create particular `cat-clicker` string
      var componentString = createCatClickerComponent(cat);

      // Create particular `cat-clicker` element
      var componentContainerEl = document.createElement('div');
      componentContainerEl.innerHTML = componentString;

      // Add created particular `cat-clicker` to `app-container`
      displayAreaEl.appendChild(componentContainerEl);

      var trigger = componentContainerEl.getElementsByClassName('trigger')[0];
      var counter = componentContainerEl.getElementsByClassName('counter')[0];
      
      // Add event listener for `click`
      trigger.addEventListener('click', () => {
        cat.counter++;
        counter.textContent = generateCounterLabel(cat.counter);
      });
    }
  })();

  </script>
</body>
</html>